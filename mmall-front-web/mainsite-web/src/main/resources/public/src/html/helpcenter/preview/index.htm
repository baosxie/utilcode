<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
    <title>首页预览</title>
    <link href="/src/css/base.css" rel="stylesheet" type="text/css" />
    <link href="/src/css/front.css" rel="stylesheet" type="text/css" />
     	    <style type="text/css">
        .category-show .category-side, .category-show .category-nav {
            display: block;
        }
    </style>
    <script>
        function clientSideInclude(id, url) {
            var req = false;

            // Safari, Firefox, 及其他非微软浏览器
            if (window.XMLHttpRequest) {
                try {
                    req = new XMLHttpRequest();
                } catch (e) {
                    req = false;
                }
            } else if (window.ActiveXObject) {

                // For Internet Explorer on Windows
                try {
                    req = new ActiveXObject("Msxml2.XMLHTTP");
                } catch (e) {
                    try {
                        req = new ActiveXObject("Microsoft.XMLHTTP");
                    } catch (e) {
                        req = false;
                    }
                }
            }
            var element = document.getElementById(id);

            if (req) {
            	// 同步请求，等待收到全部内容
                req.open('GET', url, test());
                req.send(null);
                element.innerHTML = req.responseText;
            }
        }
    </script>
</head>
<body onLoad="clientSideInclude('includefooter', '/templates/category/category.html')">
	<div class="clearfix top-bar">
		<div class="wrap">
			<div class="l region-select">
				<span>送货至</span>
				<em data-code="-5001">重庆市(渝北区)</em>
				<i></i>
			</div>
			<div class="r top-bar-menu">
				<ul>
					<li class="no-login" style="display: none;">
						<a href="/login">请登录！</a>
					</li>
					<li class="is-login" style="display: list-item;">
						<a href="/profile/basicinfo" class="username">cc</a>
					</li>
					<li class="pull-down">
						<dl>
							<dt>
								<a style="cursor: default; color: #888; text-decoration: none;">我的百万店</a>
								<i></i>
							</dt>
							<dd class="myOrder">
								<a href="/myorder">我的订单</a>
							</dd>
							<dd class="ticket">
								<a href="/cartlist/">我的进货单</a>
							</dd>
							<dd class="coupon">
								<a href="/coupon/">我的优惠券</a>
							</dd>
							<dd class="collect">
								<a href="/profile/focus">我的收藏</a>
							</dd>
							<dd class="loginout">
								<a>退出登录</a>
							</dd>
						</dl>
					</li>
					<li>
						<span>｜</span>
					</li>
					<li>
						<em>客服热线：0571-87651759</em>
					</li>
				</ul>
			</div>
		</div>
	</div>
	<!-- topbar -->
	<div class="top-ads"></div>
	<!-- topads -->
	<div class="wrap clearfix top rel">
		<h1 class="l logo">
			<a href="/" title="百万店">
				<img src="/src/images/logo.png" alt="百万店">
			</a>
		</h1>
		<div class="l">
			<div class="search">
				<i></i>
				<input type="text" placeholder="热门搜索" class="sear-input">
				<button id="search" class="sub-input">搜 索</button>
			</div>
		</div>
		<div class="cart abs">
			<a href="/cartlist/">
				<em></em>
				<span>进货单</span>
				<i><b class="js-cart-num">0</b></i>
			</a>
		</div>
		<div class="num-tip">+1</div>
	</div>
	<!-- header -->
	<div class="main-category wrap">
		<div class="category-item" id='add-category'>
			<dl class="active">
				<dt>
					全部分类<i></i>
				</dt>
			</dl>
		</div>
		<div class='category-show'>
	        <span id="includefooter"></span>
	    </div>
	</div>
	<!-- categoty -->
	<div class="bg-french-gray ">
		<div class="banner">
			<div class="pic">
				<ul>
				</ul>
			</div>
			<div class="btn round">
				<ul>
				</ul>
			</div>
		</div>
		<div class="wrap clearfix">
			<div class="new-pro">
				<i>新品上架</i>
				<div class="box"></div>
			</div>
			<div class="hot-pro">
				<i>热销商品</i>
				<ul></ul>
			</div>
		</div>
		<div class="wrap clearfix brand-pro">
			<h2>品牌专区</h2>
			<div class="bg"></div>
			<ul></ul>
		</div>
		<!-- <div class="wrap clearfix module" id='itme1'>
			<div class='title clearfix'></div>
			<div class="list">
			</div>
		</div>
		<div class="wrap clearfix module" id='itme2'>
			<div class='title clearfix'></div>
			<div class="list">
			</div>
		</div>
		<div class="wrap clearfix module" id='itme3'>
			<div class='title clearfix'></div>
			<div class="list">
			</div>
		</div>
		<div class="wrap clearfix module" id='itme4'>
			<div class='title clearfix'></div>
			<div class="list">
			</div>
		</div>
		<div class="wrap clearfix module" id='itme5'>
			<div class='title clearfix'></div>
			<div class="list">
			</div>
		</div> -->
	</div>
	<!-- main -->
	<div class="footer-wrap">
		<div class="wrap clearfix footer">
		<dl>
		<dt>购物指南</dt>
		<dd>
		<a href="/src/html/helpcenter/article/a-1.htm">购物流程</a>
		</dd>
		<dd>
		<a href="/src/html/helpcenter/article/a-2.htm">满送活动</a>
		</dd>
		<dd>
		<a href="/src/html/helpcenter/article/a-3.htm">订单查询</a>
		</dd>
		<dd>
		<a href="/src/html/helpcenter/article/a-4.htm">我的进货单</a>
		</dd>
		</dl>
		<dl>
		<dt>支付帮助</dt>
		<dd>
		<a href="/src/html/helpcenter/article/b-1.htm">在线支付</a>
		</dd>
		<dd>
		<a href="/src/html/helpcenter/article/b-2.htm">货到付款</a>
		</dd>
		<dd>
		<a href="/src/html/helpcenter/article/b-3.htm">优惠券使用</a>
		</dd>
		</dl>
		<dl>
		<dt>配送服务</dt>
		<dd>
		<a href="/src/html/helpcenter/article/c-1.htm">配送方式</a>
		</dd>
		<dd>
		<a href="/src/html/helpcenter/article/c-2.htm">配送范围</a>
		</dd>
		<dd>
		<a href="/src/html/helpcenter/article/c-3.htm">配送费用</a>
		</dd>
		<dd>
		<a href="/src/html/helpcenter/article/c-4.htm">验货与签收</a>
		</dd>
		</dl>
		<dl>
		<dt>售后服务</dt>
		<dd>
		<a href="/src/html/helpcenter/article/d-1.htm">退货流程</a>
		</dd>
		<dd>
		<a href="/src/html/helpcenter/article/d-2.htm">常见问题</a>
		</dd>
		<dd>
		<a href="/src/html/helpcenter/article/d-3.htm">建议反馈</a>
		</dd>
		<dd>
		<a href="/src/html/helpcenter/article/d-4.htm">联系客服</a>
		</dd>
		</dl>
		</div>
	</div>
	<!-- footer -->
	<div class="copyright">
		<p>
		<a href="/src/html/helpcenter/article/about.htm">关于我们</a>
		<span>|</span>
		<a href="/src/html/helpcenter/article/cooperation.htm">合作提案</a>
		</p>
		<p>
		<span>©2014-2015 023.baiwandian.cn 版权所有 浙ICP备 14037458号</span>
		</p>
	</div>
	<!-- copyright -->
	<script src="/src/js/jquery.js" type="text/javascript"></script>
    <script src="/src/js/common.js" type="text/javascript"></script>
    <script src="/src/js/front.js" type="text/javascript"></script>
    <script type="text/javascript">
    	$(function () {
    		var result = "";
    		$.ajax({
    			type: "GET",
    			url : "/content/getMainsiteIndexInfoList",
    			async: false,
    			cache: false,
    			dataType: "json",
    			data : {},
    			success: function (data) {
    				if (data.code == 200) {
    					result = data.result;
    				} else {
    					return;
    				}
    			}
    		});
    		
    		var topAdsUrl 		= result[0].replace(/\"/g, ""),
    			topAdsLink 		= result[1].replace(/\"/g, ""),
    			noticeName  	= result[2].replace(/\"/g, ""),
    			noticeNameArr 	= noticeName.split(","),
    			noticeLink      = result[3].replace(/\"/g, ""),
				noticeLinkArr	= noticeLink.split(","),
				categoryName 	= result[4].replace(/\"/g, ""),
    			categoryNameArr = categoryName.split(","),
    			categoryLink 	= result[5].replace(/\"/g, ""),
    			categoryLinkArr = categoryLink.split(","),
    			bannerUrL 		= result[6].replace(/\"/g, ""),
    			bannerUrlArr 	= bannerUrL.split(","),
    			bannerLink 		= result[7].replace(/\"/g, ""),
    			bannerLinkArr 	= bannerLink.split(","),
    			newProUrl		= result[8].replace(/\"/g, ""),
				newProSkuId     = result[9].replace(/\"/g, ""),
				newProName  	= result[10].replace(/\"/g, ""),
				newProTitle		= result[11].replace(/\"/g, ""),
				newProStoreName	= result[12].replace(/\"/g, ""),
				newProStoreLink = result[13].replace(/\"/g, ""),
				newProStorePrice= result[14].replace(/\"/g, ""),
				newProTag 		= result[15].replace(/\"/g, ""),
				hotProUrl 		= result[16].replace(/\"/g, ""),
				hotProUrlArr 	= hotProUrl.split(","),
				hotProSkuId 	= result[17].replace(/\"/g, ""),
				hotProSkuIdArr 	= hotProSkuId.split(","),
				hotProName 		= result[18].replace(/\"/g, ""),
				hotProNameArr 	= hotProName.split(","),
				hotProTitle 	= result[19].replace(/\"/g, ""),
				hotProTitleArr 	= hotProTitle.split(","),
				hotProStoreName = result[20].replace(/\"/g, ""),
				hotProStoreNameArr = hotProStoreName.split(","),
				hotProStoreLink = result[21].replace(/\"/g, ""),
				hotProStoreLinkArr = hotProStoreLink.split(","),
				hotProPrice 	= result[22].replace(/\"/g, ""),
				hotProPriceArr 	= hotProPrice.split(","),
				hotTag 			= result[23].replace(/\"/g, ""),
				hotTagArr 		= hotTag.split(","),
    			brandProBg      = result[24].replace(/\"/g, ""),
    			brandProUrl     = result[25].replace(/\"/g, ""),
				brandProUrlArr	= brandProUrl.split(","),
				brandSkuId 		= result[26].replace(/\"/g, ""),
				brandSkuIdArr	= brandSkuId.split(","),
				brandName 		= result[27].replace(/\"/g, ""),
				brandNameArr 	= brandName.split(","),
				brandTitle 		= result[28].replace(/\"/g, ""),
				brandTitleArr 	= brandTitle.split(","),
				brandStoreName 	= result[29].replace(/\"/g, ""),
				brandStoreNameArr = brandStoreName.split(","),
				brandStoreLink  = result[30].replace(/\"/g, ""), 
				brandStoreLinkArr = brandStoreLink.split(","),
				brandPrice   	= result[31].replace(/\"/g, ""),
				brandPriceArr	= brandPrice.split(","),
				brandTag 		= result[28].replace(/\"/g, ""),
				brandTagArr 	= brandTag.split(","),

				item1TitleName	= result[33].replace(/\"/g, ""),
				item1AdsName 	= result[34].replace(/\"/g, ""),
				item1AdsNameArr = item1AdsName.split(","),
				item1AdsLink 	= result[35].replace(/\"/g, ""),
				item1AdsLinkArr = item1AdsLink.split(","),
				item1TitleLink 	= result[36].replace(/\"/g, ""),
				item1Background = result[37].replace(/\"/g, ""),
				item1BackgroundLink = result[38].replace(/\"/g, ""),
				item1Url 		= result[39].replace(/\"/g, ""),
				item1UrlArr 	= item1Url.split(","),
				item1SkuId 		= result[40].replace(/\"/g, ""),
				item1SkuIdArr 	= item1SkuId.split(","),
				item1Name 		= result[41].replace(/\"/g, ""),
				item1NameArr 	= item1Name.split(","),
				item1Title 		= result[42].replace(/\"/g, ""),
				item1TitleArr 	= item1Title.split(","),
				item1StoreName 	= result[43].replace(/\"/g, ""),
				item1StoreNameArr = item1StoreName.split(","),
				item1StoreLink 	= result[44].replace(/\"/g, ""),
				item1StoreLinkArr = item1StoreLink.split(","),
				item1Price 		= result[45].replace(/\"/g, ""),
				item1PriceArr 	= item1Price.split(","),
				item1Tag 		= result[46].replace(/\"/g, ""),
				item1TagArr 	= item1Tag.split(","),

				item2TitleName	= result[47].replace(/\"/g, ""),
				item2AdsName 	= result[48].replace(/\"/g, ""),
				item2AdsNameArr = item2AdsName.split(","),
				item2AdsLink 	= result[49].replace(/\"/g, ""),
				item2AdsLinkArr = item2AdsLink.split(","),
				item2TitleLink 	= result[50].replace(/\"/g, ""),
				item2Background = result[51].replace(/\"/g, ""),
				item2BackgroundLink = result[52].replace(/\"/g, ""),
				item2Url 		= result[53].replace(/\"/g, ""),
				item2UrlArr 	= item2Url.split(","),
				item2SkuId 		= result[54].replace(/\"/g, ""),
				item2SkuIdArr 	= item2SkuId.split(","),
				item2Name 		= result[55].replace(/\"/g, ""),
				item2NameArr 	= item2Name.split(","),
				item2Title 		= result[56].replace(/\"/g, ""),
				item2TitleArr 	= item2Title.split(","),
				item2StoreName 	= result[57].replace(/\"/g, ""),
				item2StoreNameArr = item2StoreName.split(","),
				item2StoreLink 	= result[58].replace(/\"/g, ""),
				item2StoreLinkArr = item2StoreLink.split(","),
				item2Price 		= result[59].replace(/\"/g, ""),
				item2PriceArr 	= item2Price.split(","),
				item2Tag 		= result[60].replace(/\"/g, ""),
				item2TagArr 	= item2Tag.split(","),

				item3TitleName	= result[61].replace(/\"/g, ""),
				item3AdsName 	= result[62].replace(/\"/g, ""),
				item3AdsNameArr = item3AdsName.split(","),
				item3AdsLink 	= result[63].replace(/\"/g, ""),
				item3AdsLinkArr = item3AdsLink.split(","),
				item3TitleLink 	= result[64].replace(/\"/g, ""),
				item3Background = result[65].replace(/\"/g, ""),
				item3BackgroundLink = result[66].replace(/\"/g, ""),
				item3Url 		= result[67].replace(/\"/g, ""),
				item3UrlArr 	= item3Url.split(","),
				item3SkuId 		= result[68].replace(/\"/g, ""),
				item3SkuIdArr 	= item3SkuId.split(","),
				item3Name 		= result[69].replace(/\"/g, ""),
				item3NameArr 	= item3Name.split(","),
				item3Title 		= result[70].replace(/\"/g, ""),
				item3TitleArr 	= item3Title.split(","),
				item3StoreName 	= result[71].replace(/\"/g, ""),
				item3StoreNameArr = item3StoreName.split(","),
				item3StoreLink 	= result[72].replace(/\"/g, ""),
				item3StoreLinkArr = item3StoreLink.split(","),
				item3Price 		= result[73].replace(/\"/g, ""),
				item3PriceArr 	= item3Price.split(","),
				item3Tag 		= result[74].replace(/\"/g, ""),
				item3TagArr 	= item3Tag.split(","),	

				item4TitleName	= result[75].replace(/\"/g, ""),
				item4AdsName 	= result[76].replace(/\"/g, ""),
				item4AdsNameArr = item4AdsName.split(","),
				item4AdsLink 	= result[77].replace(/\"/g, ""),
				item4AdsLinkArr = item4AdsLink.split(","),
				item4TitleLink 	= result[78].replace(/\"/g, ""),
				item4Background = result[79].replace(/\"/g, ""),
				item4BackgroundLink = result[80].replace(/\"/g, ""),
				item4Url 		= result[81].replace(/\"/g, ""),
				item4UrlArr 	= item4Url.split(","),
				item4SkuId 		= result[82].replace(/\"/g, ""),
				item4SkuIdArr 	= item4SkuId.split(","),
				item4Name 		= result[83].replace(/\"/g, ""),
				item4NameArr 	= item4Name.split(","),
				item4Title 		= result[84].replace(/\"/g, ""),
				item4TitleArr 	= item4Title.split(","),
				item4StoreName 	= result[85].replace(/\"/g, ""),
				item4StoreNameArr = item4StoreName.split(","),
				item4StoreLink 	= result[86].replace(/\"/g, ""),
				item4StoreLinkArr = item4StoreLink.split(","),
				item4Price 		= result[87].replace(/\"/g, ""),
				item4PriceArr 	= item4Price.split(","),
				item4Tag 		= result[88].replace(/\"/g, ""),
				item4TagArr 	= item4Tag.split(","),	

				item5TitleName	= result[89].replace(/\"/g, ""),
				item5AdsName 	= result[90].replace(/\"/g, ""),
				item5AdsNameArr = item5AdsName.split(","),
				item5AdsLink 	= result[91].replace(/\"/g, ""),
				item5AdsLinkArr = item5AdsLink.split(","),
				item5TitleLink 	= result[92].replace(/\"/g, ""),
				item5Background = result[93].replace(/\"/g, ""),
				item5BackgroundLink = result[94].replace(/\"/g, ""),
				item5Url 		= result[95].replace(/\"/g, ""),
				item5UrlArr 	= item5Url.split(","),
				item5SkuId 		= result[96].replace(/\"/g, ""),
				item5SkuIdArr 	= item5SkuId.split(","),
				item5Name 		= result[97].replace(/\"/g, ""),
				item5NameArr 	= item5Name.split(","),
				item5Title 		= result[98].replace(/\"/g, ""),
				item5TitleArr 	= item5Title.split(","),
				item5StoreName 	= result[99].replace(/\"/g, ""),
				item5StoreNameArr = item5StoreName.split(","),
				item5StoreLink 	= result[100].replace(/\"/g, ""),
				item5StoreLinkArr = item5StoreLink.split(","),
				item5Price 		= result[101].replace(/\"/g, ""),
				item5PriceArr 	= item5Price.split(","),
				item5Tag 		= result[102].replace(/\"/g, ""),
				item5TagArr 	= item5Tag.split(",");	
    		
			// 首页模版数据
			//-----start repalce----
			var obj = {
				topAds : {
					url : topAdsUrl, //0
					link : topAdsLink //1
				},
				notice : {
					name : noticeNameArr, //2
					link : noticeLinkArr //3
				},
				category: {
					name: categoryNameArr, //4
					link: categoryLinkArr //5
				},
				banner : {
					url : bannerUrlArr, //6
					link : bannerLinkArr //7
				},
				newPro : {
					url : newProUrl,
					skuId : newProSkuId,
					name : newProName,
					title : newProTitle,
					storeName : newProStoreName,
					storeLink : newProStoreLink,
					price : newProStorePrice,
					tag : newProTag
				},
				hotPro : {
					url : hotProUrlArr,
					skuId : hotProSkuIdArr,
					name : hotProNameArr,
					title : hotProTitleArr,
					storeName : hotProStoreNameArr,
					storeLink : hotProStoreLinkArr,
					price : hotProPriceArr,
					tag : hotTagArr
				},
				brandPro : {
					bakground: brandProBg,
					list : {
						url : brandProUrlArr,
						skuId : brandSkuIdArr,
						name : brandNameArr,
						title : brandTitleArr,
						storeName : brandStoreNameArr,
						storeLink : brandStoreLinkArr,
						price : brandPriceArr,
						tag : brandTagArr
					}
				},
				item1 : {
					titleName : item1TitleName, 
					ads : {
						name : item1AdsNameArr,
						link  : item1AdsLinkArr
					},
					titleLink : item1TitleLink,
					background : item1Background,
					backgroundLink : item1BackgroundLink,
					main : {
						url : item1UrlArr,
						skuId : item1SkuIdArr,
						name : item1NameArr,
						title : item1TitleArr,
						storeName : item1StoreNameArr,
						storeLink : item1StoreLinkArr,
						price : item1PriceArr,
						tag : item1TagArr
					}
				},
				item2 : {
					titleName : item2TitleName, 
					ads : {
						name : item2AdsNameArr,
						link  : item2AdsLinkArr
					},
					titleLink : item2TitleLink,
					background : item2Background,
					backgroundLink : item2BackgroundLink,
					main : {
						url : item2UrlArr,
						skuId : item2SkuIdArr,
						name : item2NameArr,
						title : item2TitleArr,
						storeName : item2StoreNameArr,
						storeLink : item2StoreLinkArr,
						price : item2PriceArr,
						tag : item2TagArr
					}
				},
				item3 : {
					titleName : item3TitleName, 
					ads : {
						name : item3AdsNameArr,
						link  : item3AdsLinkArr
					},
					titleLink : item3TitleLink,
					background : item3Background,
					backgroundLink : item3BackgroundLink,
					main : {
						url : item3UrlArr,
						skuId : item3SkuIdArr,
						name : item3NameArr,
						title : item3TitleArr,
						storeName : item3StoreNameArr,
						storeLink : item3StoreLinkArr,
						price : item3PriceArr,
						tag : item3TagArr
					}
				},
				item4 : {
					titleName : item4TitleName, 
					ads : {
						name : item4AdsNameArr,
						link  : item4AdsLinkArr
					},
					titleLink : item4TitleLink,
					background : item4Background,
					backgroundLink : item4BackgroundLink,
					main : {
						url : item4UrlArr,
						skuId : item4SkuIdArr,
						name : item4NameArr,
						title : item4TitleArr,
						storeName : item4StoreNameArr,
						storeLink : item4StoreLinkArr,
						price : item4PriceArr,
						tag : item4TagArr
					}
				},
				item5 : {
					titleName : item5TitleName, 
					ads : {
						name : item5AdsNameArr,
						link  : item5AdsLinkArr
					},
					titleLink : item5TitleLink,
					background : item5Background,
					backgroundLink : item5BackgroundLink,
					main : {
						url : item5UrlArr,
						skuId : item5SkuIdArr,
						name : item5NameArr,
						title : item5TitleArr,
						storeName : item5StoreNameArr,
						storeLink : item5StoreLinkArr,
						price : item5PriceArr,
						tag : item5TagArr
					}
				}
			};
			//-----end repalce----

			// 创建头部广告
			function createTopAds(list) {
				console.log(list);
				if (list.url.length != 0) {
					var dom = "<a href='"+ list.link +"' target='_blank'><img src='"+ list.url +"' />";
					$(".top-ads").show().append(dom);
				}
			};
			createTopAds(obj.topAds);
			// 创建公告
			function createNotice(list) {
				var dom = "";
				for (var i = 0; i < list.name.length; i++) {
					dom += "<li><a href='"+ list.link[i] +"' title='"+ list.name[i] +"' target='_blank'>"+ list.name[i] +"</a></li>"
				}
				$(".notice ul").append(dom);
			}
			createNotice(obj.notice);
			// 创建主分类旁分类
			function createCate(list) {
				var dom = '',
					len = list.name.length;
				if (len != 0) {
					for (var i = 0; i < len; i++) {
						dom += "<dd><a href='"+ list.link[i] +"'>"+ list.name[i] +"</a></dd>";
					}
				} else {
					dom = "";
				}
				$("#add-category dl").append(dom);
			}
			createCate(obj.category);
			// banner模块
			var bannerBox = $(".banner"),
				bannerBtn = bannerBox.find(".btn li"),
    			scrollBox = bannerBox.find(".pic ul"),
    			flag = 0;;
    		// 创建banner列表和按钮
			function createBanner(data) {
				var len = data.url.length,
					listDom = "",
					btnDom = "";
				for (var i = 0; i < len; i++) {
					listDom += "<li><a href='"+ data.link[i] +"' style='background-image: url("+ data.url[i] +");'></a></li>";
				}
				bannerBox.find(".pic ul").append(listDom);

				if (len >= 2) {
					for (var i = 0; i < len; i++) {
						btnDom += "<li></li>";
					}
				} else {
					btnDom = "";
				}
				bannerBox.find(".btn ul").append(btnDom);
				bannerBox.find(".btn li").eq(0).addClass("active");
			}
			createBanner(obj.banner);

			$(window).resize(function() {
				windowW = $(window).width();

				scrollBox.find("li").css({
					width : windowW
				});
				$(".banner .btn").css({
					right : (windowW - 1190) / 2 + 300
				});

				bannerBox.on("click", ".btn li", function () {
					var index = $(this).index();
					flag = index;
					$(this).addClass("active").siblings().removeClass("active");
					scrollBox.animate({ left : -index * windowW}, 400);
				});

			});

			scrollBox.find("li").css({
				width : windowW
			});
			$(".banner .btn").css({
				right : (windowW - 1190) / 2 + 300
			});

			// banner切换
			bannerBox.on("click", ".btn li", function () {
				var index = $(this).index();
				flag = index;
				$(this).addClass("active").siblings().removeClass("active");
				scrollBox.animate({ left : -index * windowW}, 400);
			});
			// 自动执行banner切换
			var timer = setInterval(bannerSwitch, 5000);
			function bannerSwitch() {
				var len = scrollBox.find("li").length;
				flag++;
				if (flag >= len) flag = 0;
				$(".banner").find(".btn li").eq(flag).trigger("click");
			}
			$(".banner").hover( function () {
				clearInterval(timer);
			}, function () {
				timer = setInterval(bannerSwitch, 5000);
			});

			// 新品上架
			function createNewPro(list) {
				var dom = "",
					tag = list.tag,
					tagArr = [];

				if (list.skuId.length != 0) {
					if (tag != null && tag.length != 0) {
						tagArr = tag.split("/");
					} else {
						tagArr = [];
					}
					dom += "<div class='pro-box' data-skuid='"+ list.skuId +"' data-skunum='99999'>"+
					"<span class='pic'>"+
						"<a href='/product/detail?skuId="+ list.skuId +"' target='_blank'>"+
							"<img src='"+ list.url +"'>"+
						"</a>"+
						"</span>"+
						"<a href='/product/detail?skuId="+ list.skuId +"' class='tit' target='_blank' title='"+ list.name +"'>"+ list.name +"</a>"+
						"<span class='des' title='"+ list.title +"'>"+ list.title +"</span>"+
						"<span class='price'><em>¥</em>"+ list.price +"</span>"+
						"<a href='"+ list.storeLink +"' class='store-name'>"+ list.storeName +"</a>"+
						"<p class='tag'>";
					for (var i = 0; i < tagArr.length; i++) {
						dom += "<span>"+ tagArr[i] +"</span>";
					}
					dom += "</p>"+
						"<div class='action'>"+
							"<div class='jump'>"+
								"<span class='minus'>-</span>"+
								"<input class='num' value='1'>"+
								"<span class='add'>+</span>"+
							"</div>"+
							"<div class='add-cart'>加入进货单</div>"+
							"</div>"+
						"</div>";
					$(".new-pro .box").html(dom);
				}
			}
			createNewPro(obj.newPro);

			// 热销商品
			function createHotPro(list) {
				var dom = "",
					tag = "",
					tagArr = [],
					len = list.url.length;
				if ( len > 4) {
					len = 4;
				}
				for (var i = 0; i < len; i++) {
					dom += "<li><div class='pro-box' data-skuid='"+ list.skuId[i] +"' data-skunum='99999'>"+
					"<span class='pic'>"+
					"<a href='/product/detail?skuId="+ list.skuId[i] +"' target='_blank'>"+
						"<img src='"+ list.url[i] +"'>"+
					"</a>"+
					"</span>"+
					"<a href='/product/detail?skuId="+ list.skuId[i] +"' class='tit' target='_blank' title='"+ list.name[i] +"'>"+ list.name[i] +"</a>"+
					"<span class='des' title='"+ list.title[i] +"'>"+ list.title[i] +"</span>"+
					"<span class='price'><em>¥</em>"+ list.price[i] +"</span>"+
					"<a href='"+ list.storeLink[i] +"' class='store-name'>"+ list.storeName[i] +"</a>"+
					"<p class='tag'>";
					tag = list.tag[i];
					if (tag != undefined && tag.length != 0) {
						tagArr = tag.split("/");
						for (var j = 0; j < tagArr.length; j++) {
							dom += "<span>"+ tagArr[j] +"</span>";
						}
					}
					dom +=	"</p>"+
					"<div class='action'>"+
						"<div class='jump'>"+
							"<span class='minus'>-</span>"+
							"<input class='num' value='1'>"+
							"<span class='add'>+</span>"+
						"</div>"+
						"<div class='add-cart'>加入进货单</div>"+
						"</div>"+
					"</div></li>";
				}
				$(".hot-pro ul").html(dom);
			}
			createHotPro(obj.hotPro);

			// 品牌专区
			function createBrandList(data) {
				var dom = "",
				    list = data.list;
					tag = "",
					tagArr = [],
					len = list.url.length;
				if ( len > 3) {
					len = 3;
				}
				for (var i = 0; i < len; i++) {
					dom += "<li><div class='pro-box' data-skuid='"+ list.skuId[i] +"' data-skunum='99999'>"+
					"<span class='pic'>"+
					"<a href='/product/detail?skuId="+ list.skuId[i] +"' target='_blank'>"+
						"<img src='"+ list.url[i] +"'>"+
					"</a>"+
					"</span>"+
					"<a href='/product/detail?skuId="+ list.skuId[i] +"' class='tit' target='_blank' title='"+ list.name[i] +"'>"+ list.name[i] +"</a>"+
					"<span class='des' title='"+ list.title[i] +"'>"+ list.title[i] +"</span>"+
					"<span class='price'><em>¥</em>"+ list.price[i] +"</span>"+
					"<a href='"+ list.storeLink[i] +"' class='store-name'>"+ list.storeName[i] +"</a>"+
					"<p class='tag'>";
					tag = list.tag[i];
					if (tag != undefined && tag.length != 0) {
						tagArr = tag.split("/");
						for (var j = 0; j < tagArr.length; j++) {
							dom += "<span>"+ tagArr[j] +"</span>";
						}
					}
					dom +=	"</p>"+
					"<div class='action'>"+
						"<div class='jump'>"+
							"<span class='minus'>-</span>"+
							"<input class='num' value='1'>"+
							"<span class='add'>+</span>"+
						"</div>"+
						"<div class='add-cart'>加入进货单</div>"+
						"</div>"+
					"</div></li>";
				}
				$(".brand-pro ul").html(dom);
				$(".brand-pro .bg").html("<img src='"+ data.bakground +"' />");
			}
			createBrandList(obj.brandPro);

			// 分类模块
			var item1 = $("#itme1"),
				item2 = $("#itme2"),
				item3 = $("#itme3"),
				item4 = $("#itme4"),
				item5 = $("#itme5");
			// 创建分类模块下面的名称、广告、更多、主列表
			function createItem(box, list) {
				var titleDom = "",
					mainDom = "",
					tag = "",
					tagArr = [],
					len = list.main.name.length;
				if (len > 4) len = 4;
				// 创建title包含 模块名称、广告、更多连接
				titleDom += "<i></i><span>"+ list.titleName +"</span>";
				for (var i = 0; i < list.ads.link.length; i++) {
					titleDom += "<a href='"+ list.ads.link[i] +"' target='_blank'>"+ list.ads.name[i] +"</a>";
				}
				titleDom += "<a href='"+ list.titleLink +"' target='_blank' class='more'>更多></a>";
				box.find(".title").append(titleDom);
				// 创建主列表包含广告图
				mainDom += "<div class='bg'><a href='"+ list.backgroundLink +"' target='_blank'><img src='"+ list.background +"'></a></div><ul>";
				for (var i = 0; i < len; i++) {
					mainDom += "<li><div class='pro-box' data-skuid='"+ list.main.skuId[i] +"' data-skunum='99999'>"+
					"<span class='pic'>"+
					"<a href='/product/detail?skuId="+ list.main.skuId[i] +"' target='_blank'>"+
						"<img src='"+ list.main.url[i] +"'>"+
					"</a>"+
					"</span>"+
					"<a href='/product/detail?skuId="+ list.main.skuId[i] +"' class='tit' target='_blank' title='"+ list.main.name[i] +"'>"+ list.main.name[i] +"</a>"+
					"<span class='des' title='"+ list.main.title[i] +"'>"+ list.main.title[i] +"</span>"+
					"<span class='price'><em>¥</em>"+ list.main.price[i] +"</span>"+
					"<a href='"+ list.main.storeLink[i] +"' class='store-name'>"+ list.main.storeName[i] +"</a>"+
					"<p class='tag'>";
					tag = list.main.tag[i];
					if (tag != undefined && tag.length != 0) {
						tagArr = tag.split("/");
						for (var j = 0; j < tagArr.length; j++) {
							mainDom += "<span>"+ tagArr[j] +"</span>";
						}
					}
					mainDom += "</p>"+
					"<div class='action'>"+
						"<div class='jump'>"+
							"<span class='minus'>-</span>"+
							"<input class='num' value='1'>"+
							"<span class='add'>+</span>"+
						"</div>"+
						"<div class='add-cart'>加入进货单</div>"+
						"</div>"+
					"</div></li>";
				}
				mainDom += "</ul>";
				box.find(".list").append(mainDom);
			}
			//createItem(item1, obj.item1);
			//createItem(item2, obj.item2);
			//createItem(item3, obj.item3);
			//createItem(item4, obj.item4);
			
			// 加入购物车
			function resetListaction(box) {
				box.on("mousemove", ".pro-box", function () {
					$(this).addClass("active").siblings().removeClass("active");
					if (!$(this).find(".action").is(":animated")) {
						$(this).find(".action").animate({
							bottom: -1 + "px",
							opacity: 1,
							zIndex : 2
						}, 200);
					}
				});

				box.on("mouseleave", ".pro-box", function () {
					$(this).removeClass("active");
					$(this).find(".action").animate({
						bottom: 40 + "px",
						opacity: 0,
						zIndex : -1
					}, 200);
				});

				box.on("click", ".add", function () {
					var numInput = $(this).siblings(".num"),
						numVal = numInput.val(),
						maxNum = $(this).closest(".pro-box").data("skunum");
					if (numVal < maxNum) {
						numVal++;
						numInput.val(numVal);
					} else {
						$.message.alert("库存不足！", "info");
						numInput.val(maxNum);
					}
				});
				box.on("click", ".minus", function () {
					var numInput = $(this).siblings(".num"),
						numVal = numInput.val();
					if (numVal <= 1) {
						return;
					} else {
						numVal--;
						numInput.val(numVal);
					}
				});
				box.on("change", ".num", function () {
					var numInput = $(this),
						numVal = numInput.val(),
						maxNum = $(this).closest(".pro-box").data("skunum");
					if (numVal < 1 || isNaN(numVal)) {
						numVal = 1;
						numInput.val(numVal);
					}
					if (numVal <= maxNum) {
						numInput.val(numVal);
					} else {
						$.message.alert("库存不足！", "info");
						numInput.val(maxNum);
					}
				});
				// 加入进货单
				box.on("click", ".add-cart", function () {
					var skuId = $(this).closest(".pro-box").data("skuid"),
						numVal = $(this).siblings(".jump").find(".num").val(),
						maxNum = $(this).closest(".pro-box").data("skunum");
					if (maxNum > 0) {
						addToCart(skuId, numVal);
					} else {
						$.message.alert("库存不足！", "info");
					}
				});
				function addToCart(id, num) {
					$.ajax({
						type : "POST",
						url: "/cart/addToCart",
						async: false,
						contentType: "application/json",
						data : JSON.stringify({
							"skuId" : id,
							"diff" : num
						}),
						success: function (data) {
							if (data.code == 200) {
								$.message.alert("加入进货单成功！", "success");
								getCartNum();
	                        } else if(data.code == 403){
							    $.message.alert("您尚未登录，请先登录！", "info", function(){
							        window.location.href = "/login?redirectURL="+encodeURIComponent(url);
							    });
							} else if(data.code == 404){
							    $.message.alert("进货单中最多只能加入50件不同的商品！", "info");
							} else {
								$.message.alert(data.message, "info");
							}
						}
					});
				}
			}
			resetListaction($(".new-pro"));
			resetListaction($(".hot-pro"));
			resetListaction($(".brand-pro"));
			resetListaction($(".module"));
		
    	});
    </script>
    <script type="text/javascript">
    function test() {
	    setTimeout(function () {
	        var categorySide = $(".category-side"),
	            categoryNav = $(".category-nav"),
	            categoryWrap = $(".category-wrap"),
	            categoryBox = $(".main-category-box"),
	            categoryBoxTop = $(".main-category-top");
	
	        categoryNav.find("li").eq(0).addClass("active");
	
	        categorySide.on("mousemove", "li", function () {
	            var index = $(this).index();
	            $(this).addClass("active").siblings().removeClass("active");
	            $(this).closest(".category-show").find(".category-nav").show().find("li").eq(index).addClass("active").siblings().removeClass("active");
	        });
	
	        categoryWrap.on("mouseleave", function () {
	            categorySide.find("li").removeClass("active");
	            $(this).find(".category-nav").find("li").removeClass();
	        });
	
	        categoryBox.find("dt").on("mousemove", function () {
	            $(this).closest('.main-category').find(".category-side").show();
	        });
	
	        categoryBox.find(".category-wrap").on("mouseleave", function () {
	            $(this).find(".category-side, .category-nav").hide();
	        });
	
	        categoryBoxTop.find("dt").on("mousemove", function () {
	            $(this).closest('.main-category').find(".category-side").show();
	        });
	
	        categoryBoxTop.find(".category-wrap").on("mouseleave", function () {
	            $(this).find(".category-side, .category-nav").hide();
	        });
	    }, 2000);
    }
	</script>
</body>
</html>
